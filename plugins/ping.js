const config=require('../config');const {cmd,commands}=require('../command');const os=require("os");const speedTest=require('speedtest-net');const {runtime}=require('../lib/functions');function convertToReadableSize(speed){return speed>1024?(speed/1024).toFixed(2)+' GBs':speed+' MBs'};cmd({pattern:"ping",desc:"Check bot's response time and network speed.",category:"main",react:"âœˆï¸",filename:__filename},async(conn,mek,m,{from,quoted,body,isCmd,command,args,q,isGroup,sender,senderNumber,botNumber2,botNumber,pushname,isMe,isOwner,groupMetadata,groupName,participants,groupAdmins,isBotAdmins,isAdmins,reply})=>{try{const startTime=Date.now();await conn.sendMessage(from,{text:'*DILA MD... ðŸ“¶*'});const endTime=Date.now();const ping=endTime-startTime;const speed=await speedTest({acceptLicense:true});let downloadSpeed=(speed.download.bandwidth/125000).toFixed(2);let uploadSpeed=(speed.upload.bandwidth/125000).toFixed(2);downloadSpeed=convertToReadableSize(downloadSpeed);uploadSpeed=convertToReadableSize(uploadSpeed);await conn.sendMessage(from,{text:`*Ping:* _${ping}ms_ âœˆï¸`});setTimeout(async()=>{await conn.sendMessage(from,{text:`*Download Speed ðŸ“¥:* _${downloadSpeed}_`});},700);setTimeout(async()=>{await conn.sendMessage(from,{text:`*Upload Speed ðŸ“¤:* _${uploadSpeed}_`});},1400)}catch(e){console.log(e);await reply(`Error fetching network speed: ${e.message}`)}});
