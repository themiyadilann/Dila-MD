const fs=require('fs');const path=require('path');const{readEnv}=require('../lib/database');const{cmd}=require('../command');const{fetchJson}=require('../lib/functions');const sensitiveData=require('../dila_md_licence/a/b/c/d/dddamsbs');cmd({pattern:"group",desc:"Displays detailed information about the group",isGroup:true,isOwner:false,react:"ðŸ¤”",filename:__filename},async(conn,mek,m,{from,body,isGroup})=>{try{if(isGroup){const args=body.trim().split(/\s+/).slice(1);const option=args[0]?args[0].toLowerCase():'all';const groupMetadata=await conn.groupMetadata(from);const groupName=groupMetadata.subject;let groupDp;try{groupDp=await conn.profilePictureUrl(from,'image')}catch(e){console.error(`Error fetching group profile picture: ${e.message}`);groupDp="https://via.placeholder.com/150"}let groupLink="No link available";try{const groupInvite=await fetchJson(`https://api.example.com/get-group-link?groupId=${from}`);groupLink=groupInvite.link||"No link available"}catch(e){console.error(`Error fetching group link: ${e.message}`)}const groupId=from;const members=groupMetadata.participants;const memberCount=members.length;const adminCount=members.filter(member=>member.isAdmin).length;const creator=groupMetadata.owner?groupMetadata.owner.split('@')[0]:"Unknown";const creationDate=new Date(groupMetadata.creation*1000).toLocaleDateString();const creationTime=new Date(groupMetadata.creation*1000).toLocaleTimeString();const groupDescription=groupMetadata.desc||"No description";let infoMessage="";switch(option){case'name':infoMessage=`ðŸ“› *ð—¡ð—”ð— ð—˜*: ${groupName}`;break;case'link':infoMessage=`ðŸ”— *ð—Ÿð—œð—¡ð—ž*: ${groupLink}`;break;case'id':infoMessage=`ðŸ†” *ð—œð——*: ${groupId}`;break;case'members':infoMessage=`ðŸ‘¥ *ð— ð—˜ð— ð—•ð—˜ð—¥ð—¦ ð—–ð—¢ð—¨ð—¡ð—§*: ${memberCount}`;break;case'admins':infoMessage=`ðŸ›¡ï¸ *ð—”ð——ð— ð—œð—¡ ð—–ð—¢ð—¨ð—¡ð—§*: ${adminCount}`;break;case'creator':infoMessage=`ðŸ‘‘ *ð—–ð—¥ð—˜ð—”ð—§ð—¢ð—¥*: ${creator}`;break;case'date':infoMessage=`ðŸ“… *ð—–ð—¥ð—˜ð—”ð—§ð—˜ð—— ð——ð—”ð—§ð—˜*: ${creationDate}`;break;case'time':infoMessage=`â° *ð—–ð—¥ð—˜ð—”ð—§ð—˜ð—— ð—§ð—œð— ð—˜*: ${creationTime}`;break;case'description':infoMessage=`ðŸ“ *ð——ð—˜ð—¦ð—–ð—¥ð—œð—£ð—§ð—œð—¢ð—¡*: ${groupDescription}`;break;case'all':default:infoMessage=`ðŸ“› *ð—¡ð—”ð— ð—˜*: ${groupName}\nðŸ”— *ð—Ÿð—œð—¡ð—ž*: ${groupLink}\nðŸ†” *ð—œð——*: ${groupId}\nðŸ‘¥ *ð— ð—˜ð— ð—•ð—˜ð—¥ð—¦ ð—–ð—¢ð—¨ð—¡ð—§*: ${memberCount}\nðŸ›¡ï¸ *ð—”ð——ð— ð—œð—¡ ð—–ð—¢ð—¨ð—¡ð—§*: ${adminCount}\nðŸ‘‘ *ð—–ð—¥ð—˜ð—”ð—§ð—¢ð—¥*: ${creator}\nðŸ“… *ð—–ð—¥ð—˜ð—”ð—§ð—˜ð—— ð——ð—”ð—§ð—˜*: ${creationDate}\nâ° *ð—–ð—¥ð—˜ð—”ð—§ð—˜ð—— ð—§ð—œð— ð—˜*: ${creationTime}\nðŸ“ *ð——ð—˜ð—¦ð—–ð—¥ð—œð—£ð—§ð—œð—¢ð—¡*: ${groupDescription}\n\n${sensitiveData.signature}`;}await conn.sendMessage(from,{caption:infoMessage,image:{url:groupDp},mentions:members.map(member=>member.id)})}else{await conn.sendMessage(from,{text:"This command can only be used in groups."})}}catch(e){console.error(`Error in group command: ${e.message}`)}});
